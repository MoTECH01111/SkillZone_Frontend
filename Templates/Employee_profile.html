{% extends "base.html" %}

{% block content %}
<style>
    .profile-card {
        background: #111;
        border: 1px solid #fff;
        border-radius: 16px;
        padding: 32px;
        color: white;
        box-shadow: 0 0 18px rgba(255,255,255,0.15);
        font-family: "Orbitron";
    }

    label {
        font-weight: 600;
        letter-spacing: 0.5px;
    }

    .form-control, .form-select {
        background: #000 !important;
        border: 1px solid #444 !important;
        color: white !important;
        border-radius: 10px;
        padding: 10px;
        font-family: "Orbitron";
    }

    .form-control:focus, .form-select:focus {
        border-color: #00aaff !important;
        box-shadow: 0 0 8px rgba(0,170,255,0.8);
    }

    .btn-save {
        background: #000;
        border: 1px solid #00aaff;
        color: #00aaff;
        padding: 12px;
        width: 100%;
        border-radius: 10px;
        margin-top: 15px;
        font-weight: 700;
        letter-spacing: 1px;
        transition: 0.2s ease;
    }

    .btn-save:hover {
        background: #00aaff;
        color: #000;
        box-shadow: 0 0 12px rgba(0,170,255,0.9);
    }

    .locked-field {
        opacity: 0.6;
        cursor: not-allowed;
    }
</style>

<div class="container py-5">
    <h1 class="section-title mb-4">My Profile</h1>
    <form method="POST" action="/employee/profile" class="profile-card">
        <div class="row">
            <div class="col-md-6 mb-3">
                <label>First Name</label>
                <input type="text" name="first_name" class="form-control"
                       value="{{ employee.first_name }}" required>
            </div>

            <div class="col-md-6 mb-3">
                <label>Last Name</label>
                <input type="text" name="last_name" class="form-control"
                       value="{{ employee.last_name }}" required>
            </div>
        </div>

        <div class="mb-3">
            <label>Email</label>
            <input type="email" name="email" class="form-control"
                   value="{{ employee.email }}" required>
        </div>

        <div class="row">
            <!-- Position Locked for regular employees -->
            <div class="col-md-6 mb-3">
                <label>Position</label>
                {% if session.get('employee').admin %}
                    <!-- Admin can edit -->
                    <input type="text" name="position" class="form-control"
                           value="{{ employee.position }}">
                {% else %}
                    <!-- Regular user sees but cannot edit -->
                    <input type="text" name="position" class="form-control locked-field"
                           value="{{ employee.position }}" readonly>
                {% endif %}
            </div>

            <div class="col-md-6 mb-3">
                <label>Department</label>
                <input type="text" name="department" class="form-control"
                       value="{{ employee.department }}">
            </div>
        </div>

        <div class="mb-3">
            <label>Phone</label>
            <input type="text" name="phone" class="form-control"
                   value="{{ employee.phone }}">
        </div>

        <div class="mb-3">
            <label>Gender</label>
            <select name="gender" class="form-select">
                <option {% if employee.gender == "Male" %}selected{% endif %}>Male</option>
                <option {% if employee.gender == "Female" %}selected{% endif %}>Female</option>
                <option {% if employee.gender == "Other" %}selected{% endif %}>Other</option>
            </select>
        </div>
        <button class="btn-save" type="submit">Save Changes</button>
    </form>
</div>
{% endblock %}
